{
    "$schema": "https://cloud.uipath.com/draft/2024-12/entry-point",
    "$id": "entry-points.json",
    "entryPoints": [
    {
      "filePath": "main.py",
      "uniqueId": "0c72417c-ced4-421a-a2a5-517fbdf43b5d",
      "type": "agent",
      "input": {
        "type": "object",
        "properties": {
          "file_resource": {
            "type": "object",
            "description": "UiPath IResource descriptor for a Data Service file.",
            "properties": {
              "ID": {
                "type": "string",
                "description": "Resource ID (UUID string)."
              },
              "FullName": {
                "type": "string",
                "description": "File name."
              },
              "MimeType": {
                "type": "string",
                "description": "MIME type."
              },
              "Metadata": {
                "type": "object",
                "description": "Metadata map."
              }
            },
            "required": ["ID"]
          },
          "project_type": {
            "type": "string",
            "description": "Project flavor. Use PRETRAINED, MODERN, or IXP when extracting without classification_results."
          },
          "project_name": {
            "type": "string",
            "description": "DU Modern or IXP project name. Required when classification_results are not provided."
          },
          "project_tag": {
            "type": "string",
            "description": "Published tag (legacy). Use project_version for MODERN or IXP extraction."
          },
          "project_version": {
            "type": "integer",
            "description": "Published project version (integer). Required when project_type is MODERN or IXP."
          },
          "pipeline_json": {
            "type": "object",
            "description": "Pipeline configuration containing extraction_projects mapped by document type.",
            "properties": {
              "project_id": {
                "type": "string",
                "description": "Classification project ID."
              },
              "project_name": {
                "type": "string",
                "description": "Classification project name."
              },
              "project_type": {
                "type": "string",
                "description": "Classification project type."
              },
              "classifier_id": {
                "type": "string",
                "description": "Classifier identifier."
              },
              "extraction_projects": {
                "type": "object",
                "description": "Map of document type keys to extraction projects.",
                "additionalProperties": {
                  "type": "object",
                  "description": "Extraction project configuration.",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "Extraction project ID (UUID string)."
                    },
                    "name": {
                      "type": "string",
                      "description": "Extraction project name."
                    },
                    "project_type": {
                      "type": "string",
                      "description": "Extraction project type (PRETRAINED, MODERN, IXP)."
                    },
                    "project_version": {
                      "type": "integer",
                      "description": "Published project version (integer). Required for MODERN or IXP extraction."
                    },
                    "project_tag": {
                      "type": "string",
                      "description": "Published tag (legacy). Use project_version for MODERN or IXP extraction."
                    },
                    "extractor_id": {
                      "type": "string",
                      "description": "Extractor identifier for the project."
                    },
                    "document_type_name": {
                      "type": "string",
                      "description": "Document type name used for extraction (required for MODERN; used for PRETRAINED when provided)."
                    }
                  },
                  "required": ["name", "project_type"]
                }
              },
              "validate_classification": {
                "type": "boolean",
                "description": "Pipeline setting for classification validation."
              },
              "validate_extraction": {
                "type": "boolean",
                "description": "Pipeline setting for extraction validation."
              },
              "validate_extraction_later": {
                "type": "boolean",
                "description": "Pipeline setting for delayed extraction validation."
              },
              "perform_classification": {
                "type": "boolean",
                "description": "Pipeline setting for classification."
              },
              "perform_extraction": {
                "type": "boolean",
                "description": "Pipeline setting for extraction."
              }
            }
          },
          "classification_results": {
            "type": "array",
            "description": "List of classification results to reuse for extraction instead of classifying again.",
            "items": {
              "type": "object",
              "description": "ClassificationResult"
            }
          },
          "validated_classification_action": {
            "type": "object",
            "description": "Validation action used to retrieve validated classification results when validate_classification is true."
          },
          "validate_classification": {
            "type": "boolean",
            "description": "When true, fetch validated classification results from the provided validated_classification_action."
          },
          "validate_extraction": {
            "type": "boolean",
            "description": "When true, create a validation action for the extraction results."
          },
          "action_title": {
            "type": "string",
            "description": "Title for the validation action."
          },
          "action_priority": {
            "type": "string",
            "description": "Priority for the validation action (LOW, MEDIUM, HIGH, CRITICAL)."
          },
          "action_catalog": {
            "type": "string",
            "description": "Action catalog name for the validation action."
          },
          "action_folder": {
            "type": "string",
            "description": "Folder where the validation action should be created."
          },
          "storage_bucket_name": {
            "type": "string",
            "description": "Storage bucket name used for validation actions."
          },
          "storage_bucket_directory_path": {
            "type": "string",
            "description": "Directory path in the storage bucket for validation actions."
          }
        },
        "required": [
          "file_resource"
        ]
      },
      "output": {
        "type": "object",
        "properties": {
          "project_type": {
            "type": "string",
            "description": "Project flavor used for extraction."
          },
          "project_name": {
            "type": "string",
            "description": "DU Modern or IXP project name when applicable."
          },
          "project_tag": {
            "type": "string",
            "description": "Published tag when applicable."
          },
          "document_type_id": {
            "type": "string",
            "description": "Document type identifier returned by extraction."
          },
          "document_id": {
            "type": "string",
            "description": "Document identifier returned by extraction."
          },
          "extraction_results": {
            "type": "object",
            "description": "Extraction results returned by UiPath Documents."
          },
          "validation_action": {
            "type": "object",
            "description": "ValidateExtractionAction created when validate_extraction is true."
          }
        },
        "required": [
          "extraction_results"
        ]
      }
    }
  ]
}
